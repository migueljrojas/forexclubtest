{"version":3,"sources":["src/_scripts/node_modules/browser-pack/_prelude.js","src/_scripts/src/_scripts/form-validation.js","src/_scripts/src/_scripts/main.js","src/_scripts/src/_scripts/table-generator.js"],"names":[],"mappings":"AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","'use strict';\r\n\r\nvar FormValidation = function() {\r\n    var formSubmitButton = document.querySelector('button[type=submit]');\r\n    var form = document.querySelector('.libertex-form');\r\n    var formInputs = document.querySelectorAll('.libertex-form__input');\r\n    var nameInput = document.getElementById('name');\r\n    var surnameInput = document.getElementById('surname');\r\n    var phoneInput = document.getElementById('phone');\r\n    var emailInput = document.getElementById('email');\r\n\r\n    form.addEventListener('blur', validateFormSubmission, true);\r\n\r\n    form.addEventListener('focus', hideErrorMessages, true);\r\n\r\n    function hideErrorMessages() {\r\n        var errorMessage = document.querySelector('.libertex-form__input--error');\r\n\r\n        if (errorMessage) {\r\n            errorMessage.classList.remove('libertex-form__input--error');\r\n        }\r\n    }\r\n\r\n    function resetForm() {\r\n        var formInputsArray = [].slice.call(formInputs);\r\n\r\n        formInputsArray.forEach(function(input) {\r\n            input.value = '';\r\n        });\r\n    }\r\n\r\n    function validateFormSubmission() {\r\n        if ( !isRequiredInputEmpty() ) {\r\n            enableFormSubmitButton();\r\n        }\r\n    }\r\n\r\n    function enableFormSubmitButton() {\r\n        formSubmitButton.disabled = false;\r\n    }\r\n\r\n    function disableFormSubmitButton() {\r\n        formSubmitButton.disabled = true;\r\n    }\r\n\r\n    function isRequiredInputEmpty() {\r\n        var requiredInputs = document.querySelectorAll('input[required]');\r\n        var requiredInputsArray = [].slice.call(requiredInputs);\r\n        var filledInputs = 0;\r\n\r\n        requiredInputsArray.forEach(function(input) {\r\n            var inputValue = input.value;\r\n\r\n            if (inputValue !== '') {\r\n                filledInputs++;\r\n            }\r\n        });\r\n\r\n        return requiredInputsArray.length === filledInputs;\r\n    }\r\n\r\n    formSubmitButton.addEventListener('click', submitForm, true);\r\n\r\n    function submitForm(event) {\r\n        event.preventDefault();\r\n        disableFormSubmitButton();\r\n\r\n        var inputValuesAreValid = validateInputValues();\r\n\r\n        if (inputValuesAreValid) {\r\n            displaySuccessfulMessage();\r\n            disableFormSubmitButton();\r\n        } else {\r\n            catchFormValidationError();\r\n            enableFormSubmitButton();\r\n        }\r\n    }\r\n\r\n    function displaySuccessfulMessage() {\r\n        setTimeout(function() {\r\n            form.classList.add('libertex-form--success');\r\n            resetForm();\r\n\r\n            setTimeout(function() {\r\n                form.classList.remove('libertex-form--success');\r\n            }, 4000);\r\n        }, 2000);\r\n    }\r\n\r\n    function validateInputValues() {\r\n        var isInputValuesValid = false;\r\n\r\n        if (\r\n            valueDontContainNumbers(nameInput.value) &&\r\n            valueDontContainNumbers(surnameInput.value) &&\r\n            valueIsValidPhone(phoneInput.value) &&\r\n            valueIsValidEmail(emailInput.value)\r\n        ) {\r\n            isInputValuesValid = true;\r\n        }\r\n\r\n        return isInputValuesValid;\r\n    }\r\n\r\n    function valueDontContainNumbers(value) {\r\n        var regexCondition = /^[a-z]+$/i;\r\n        return regexCondition.test(value);\r\n    }\r\n\r\n    function valueIsValidPhone(value) {\r\n        var regexCondition = /^[+]*[(]{0,1}[0-9 ]{1,4}[)]{0,1}[(]{0,1}[0-9]{1,3}[)]{0,1}[-\\s\\.0-9]*$/g;\r\n        return regexCondition.test(value);\r\n    }\r\n\r\n    function valueIsValidEmail(value) {\r\n        var regexCondition = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{1,}))$/g;\r\n\r\n        if (value !== '') {\r\n            return regexCondition.test(value);\r\n        } else {\r\n            return true;\r\n        }\r\n    }\r\n\r\n    function catchFormValidationError() {\r\n\r\n        switch (false) {\r\n            case valueDontContainNumbers(nameInput.value):\r\n                displayErrorMessage(nameInput, 'This field should be only letters');\r\n                break;\r\n            case valueDontContainNumbers(surnameInput.value):\r\n                displayErrorMessage(surnameInput, 'This field should be only letters');\r\n                break;\r\n            case valueIsValidPhone(phoneInput.value):\r\n                displayErrorMessage(phoneInput, 'Please enter a valid phone number');\r\n                break;\r\n            case valueIsValidEmail(emailInput.value):\r\n                displayErrorMessage(emailInput, 'Please enter a valid email address');\r\n                break;\r\n        }\r\n    }\r\n\r\n    function displayErrorMessage(input, message) {\r\n        input.classList.add('libertex-form__input--error');\r\n\r\n        //console.log(document.querySelectorAll('.libertex-form__input--error'));\r\n        input.nextSibling.innerHTML = message;\r\n    }\r\n}\r\n\r\nmodule.exports = FormValidation;\r\n","'use strict';\r\n\r\nvar FormValidation = require('./form-validation');\r\nvar TableGenerator = require('./table-generator');\r\n\r\n(function() {\r\n    new FormValidation();\r\n    new TableGenerator();\r\n})();\r\n","'use strict';\r\n\r\nvar TableGenerator = function() {\r\n    var tableData = [\r\n        {\r\n            money: 5321,\r\n            account: \"123 456 000\",\r\n            country: \"rusia\"\r\n        },\r\n        {\r\n            money: 3000,\r\n            account: \"425 238 238\",\r\n            country: \"spain\"\r\n        },\r\n        {\r\n            money: 890,\r\n            account: \"123 543 548\",\r\n            country: \"china\"\r\n        },\r\n        {\r\n            money: 777,\r\n            account: \"090 235 453\",\r\n            country: \"rusia\"\r\n        },\r\n        {\r\n            money: 666,\r\n            account: \"009 281 443\",\r\n            country: \"spain\"\r\n        },\r\n        {\r\n            money: 555,\r\n            account: \"515 654 522\",\r\n            country: \"china\"\r\n        },\r\n        {\r\n            money: 444,\r\n            account: \"765 452 241\",\r\n            country: \"rusia\"\r\n        },\r\n        {\r\n            money: 333,\r\n            account: \"562 183 816\",\r\n            country: \"spain\"\r\n        },\r\n        {\r\n            money: 222,\r\n            account: \"642 452 555\",\r\n            country: \"china\"\r\n        },\r\n        {\r\n            money: 111,\r\n            account: \"212 552 112\",\r\n            country: \"rusia\"\r\n        }\r\n    ];\r\n    var table = document.querySelector('.libertex-ranking__table');\r\n    var tableBody = document.querySelector('.libertex-ranking__table-body');\r\n    var tableRows = tableBody.querySelectorAll('.libertex-ranking__table-row');\r\n\r\n    function populateTableWithData() {\r\n        var tableSortCriteriaInLocalStorage = isTableSorCriteriaInLocalStorage();\r\n\r\n        if (tableSortCriteriaInLocalStorage) {\r\n            var orderedTableData =\r\n                tableData.concat().sort(compareValues(tableSortCriteriaInLocalStorage));\r\n            getCellsData(orderedTableData);\r\n        } else {\r\n            getCellsData(tableData);\r\n        }\r\n\r\n        setActiveSort(tableSortCriteriaInLocalStorage);\r\n    }\r\n\r\n    function isTableSorCriteriaInLocalStorage() {\r\n        return JSON.parse(localStorage.getItem('libertex-table-sort-criteria'));\r\n    }\r\n\r\n    function getCellsData(data) {\r\n\r\n        data.forEach(function(row, index) {\r\n            var rowCells = tableRows[index].querySelectorAll('.libertex-ranking__table-cell');\r\n\r\n            rowCells[0].innerHTML = '<span>' + row.money + '</span>';\r\n            rowCells[1].innerHTML = '<span>' + row.account + '</span>';\r\n            rowCells[2].innerHTML = '<img src=\"images/' + row.country + '.png\" alt=\"'+ row.country +'\" />';\r\n        });\r\n    }\r\n\r\n    table.addEventListener('click', sortTableData, false);\r\n\r\n    function sortTableData(event) {\r\n\r\n        var targetParent = event.target.parentNode;\r\n\r\n        if (targetParent.hasAttribute('data-sort')) {\r\n            var sortCriteria = targetParent.getAttribute('data-sort');\r\n            var orderedTableData =\r\n                tableData.concat().sort(compareValues(sortCriteria));\r\n\r\n            getCellsData(orderedTableData);\r\n            setActiveSort(sortCriteria);\r\n            saveTableSortCriteria(sortCriteria);\r\n        }\r\n    }\r\n\r\n    function setActiveSort(sortCriteria) {\r\n        var tableRows = tableBody.querySelectorAll('.libertex-ranking__table-row');\r\n        var sortedCells = document.querySelectorAll('.libertex-ranking__table-cell--sorted');\r\n        var sortedCellsArray = [].slice.call(sortedCells);\r\n        var cellIndex = 0;\r\n\r\n        if (sortCriteria === 'account') {\r\n            cellIndex = 1;\r\n        }\r\n\r\n        if (sortCriteria === 'country') {\r\n            cellIndex = 2;\r\n        }\r\n\r\n        sortedCellsArray.forEach(function(cell) {\r\n            cell.classList.remove('libertex-ranking__table-cell--sorted');\r\n        });\r\n\r\n        for (var rowIndex = 0; rowIndex <= 2; rowIndex++) {\r\n            var cells = tableRows[rowIndex].querySelectorAll('.libertex-ranking__table-cell');\r\n\r\n            cells[cellIndex].classList.add('libertex-ranking__table-cell--sorted');\r\n        }\r\n    }\r\n\r\n    function compareValues(key) {\r\n        return function(a, b) {\r\n\r\n            var comparison = 0;\r\n            if (a[key] > b[key]) {\r\n                comparison = 1;\r\n            } else if (a[key] < b[key]) {\r\n                comparison = -1;\r\n            }\r\n\r\n            return comparison * -1;\r\n        };\r\n    }\r\n\r\n    function saveTableSortCriteria(sortCriteria) {\r\n        localStorage.setItem('libertex-table-sort-criteria', JSON.stringify(sortCriteria));\r\n    }\r\n\r\n    populateTableWithData();\r\n}\r\n\r\nmodule.exports = TableGenerator;\r\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvX3NjcmlwdHMvZm9ybS12YWxpZGF0aW9uLmpzIiwic3JjL19zY3JpcHRzL21haW4uanMiLCJzcmMvX3NjcmlwdHMvdGFibGUtZ2VuZXJhdG9yLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN2SkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDVEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiJ3VzZSBzdHJpY3QnO1xyXG5cclxudmFyIEZvcm1WYWxpZGF0aW9uID0gZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgZm9ybVN1Ym1pdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvblt0eXBlPXN1Ym1pdF0nKTtcclxuICAgIHZhciBmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmxpYmVydGV4LWZvcm0nKTtcclxuICAgIHZhciBmb3JtSW5wdXRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmxpYmVydGV4LWZvcm1fX2lucHV0Jyk7XHJcbiAgICB2YXIgbmFtZUlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25hbWUnKTtcclxuICAgIHZhciBzdXJuYW1lSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3VybmFtZScpO1xyXG4gICAgdmFyIHBob25lSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGhvbmUnKTtcclxuICAgIHZhciBlbWFpbElucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VtYWlsJyk7XHJcblxyXG4gICAgZm9ybS5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgdmFsaWRhdGVGb3JtU3VibWlzc2lvbiwgdHJ1ZSk7XHJcblxyXG4gICAgZm9ybS5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsIGhpZGVFcnJvck1lc3NhZ2VzLCB0cnVlKTtcclxuXHJcbiAgICBmdW5jdGlvbiBoaWRlRXJyb3JNZXNzYWdlcygpIHtcclxuICAgICAgICB2YXIgZXJyb3JNZXNzYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmxpYmVydGV4LWZvcm1fX2lucHV0LS1lcnJvcicpO1xyXG5cclxuICAgICAgICBpZiAoZXJyb3JNZXNzYWdlKSB7XHJcbiAgICAgICAgICAgIGVycm9yTWVzc2FnZS5jbGFzc0xpc3QucmVtb3ZlKCdsaWJlcnRleC1mb3JtX19pbnB1dC0tZXJyb3InKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gcmVzZXRGb3JtKCkge1xyXG4gICAgICAgIHZhciBmb3JtSW5wdXRzQXJyYXkgPSBbXS5zbGljZS5jYWxsKGZvcm1JbnB1dHMpO1xyXG5cclxuICAgICAgICBmb3JtSW5wdXRzQXJyYXkuZm9yRWFjaChmdW5jdGlvbihpbnB1dCkge1xyXG4gICAgICAgICAgICBpbnB1dC52YWx1ZSA9ICcnO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHZhbGlkYXRlRm9ybVN1Ym1pc3Npb24oKSB7XHJcbiAgICAgICAgaWYgKCAhaXNSZXF1aXJlZElucHV0RW1wdHkoKSApIHtcclxuICAgICAgICAgICAgZW5hYmxlRm9ybVN1Ym1pdEJ1dHRvbigpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBlbmFibGVGb3JtU3VibWl0QnV0dG9uKCkge1xyXG4gICAgICAgIGZvcm1TdWJtaXRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBkaXNhYmxlRm9ybVN1Ym1pdEJ1dHRvbigpIHtcclxuICAgICAgICBmb3JtU3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBpc1JlcXVpcmVkSW5wdXRFbXB0eSgpIHtcclxuICAgICAgICB2YXIgcmVxdWlyZWRJbnB1dHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFtyZXF1aXJlZF0nKTtcclxuICAgICAgICB2YXIgcmVxdWlyZWRJbnB1dHNBcnJheSA9IFtdLnNsaWNlLmNhbGwocmVxdWlyZWRJbnB1dHMpO1xyXG4gICAgICAgIHZhciBmaWxsZWRJbnB1dHMgPSAwO1xyXG5cclxuICAgICAgICByZXF1aXJlZElucHV0c0FycmF5LmZvckVhY2goZnVuY3Rpb24oaW5wdXQpIHtcclxuICAgICAgICAgICAgdmFyIGlucHV0VmFsdWUgPSBpbnB1dC52YWx1ZTtcclxuXHJcbiAgICAgICAgICAgIGlmIChpbnB1dFZhbHVlICE9PSAnJykge1xyXG4gICAgICAgICAgICAgICAgZmlsbGVkSW5wdXRzKys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHJlcXVpcmVkSW5wdXRzQXJyYXkubGVuZ3RoID09PSBmaWxsZWRJbnB1dHM7XHJcbiAgICB9XHJcblxyXG4gICAgZm9ybVN1Ym1pdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHN1Ym1pdEZvcm0sIHRydWUpO1xyXG5cclxuICAgIGZ1bmN0aW9uIHN1Ym1pdEZvcm0oZXZlbnQpIHtcclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGRpc2FibGVGb3JtU3VibWl0QnV0dG9uKCk7XHJcblxyXG4gICAgICAgIHZhciBpbnB1dFZhbHVlc0FyZVZhbGlkID0gdmFsaWRhdGVJbnB1dFZhbHVlcygpO1xyXG5cclxuICAgICAgICBpZiAoaW5wdXRWYWx1ZXNBcmVWYWxpZCkge1xyXG4gICAgICAgICAgICBkaXNwbGF5U3VjY2Vzc2Z1bE1lc3NhZ2UoKTtcclxuICAgICAgICAgICAgZGlzYWJsZUZvcm1TdWJtaXRCdXR0b24oKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjYXRjaEZvcm1WYWxpZGF0aW9uRXJyb3IoKTtcclxuICAgICAgICAgICAgZW5hYmxlRm9ybVN1Ym1pdEJ1dHRvbigpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBkaXNwbGF5U3VjY2Vzc2Z1bE1lc3NhZ2UoKSB7XHJcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgZm9ybS5jbGFzc0xpc3QuYWRkKCdsaWJlcnRleC1mb3JtLS1zdWNjZXNzJyk7XHJcbiAgICAgICAgICAgIHJlc2V0Rm9ybSgpO1xyXG5cclxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIGZvcm0uY2xhc3NMaXN0LnJlbW92ZSgnbGliZXJ0ZXgtZm9ybS0tc3VjY2VzcycpO1xyXG4gICAgICAgICAgICB9LCA0MDAwKTtcclxuICAgICAgICB9LCAyMDAwKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiB2YWxpZGF0ZUlucHV0VmFsdWVzKCkge1xyXG4gICAgICAgIHZhciBpc0lucHV0VmFsdWVzVmFsaWQgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICB2YWx1ZURvbnRDb250YWluTnVtYmVycyhuYW1lSW5wdXQudmFsdWUpICYmXHJcbiAgICAgICAgICAgIHZhbHVlRG9udENvbnRhaW5OdW1iZXJzKHN1cm5hbWVJbnB1dC52YWx1ZSkgJiZcclxuICAgICAgICAgICAgdmFsdWVJc1ZhbGlkUGhvbmUocGhvbmVJbnB1dC52YWx1ZSkgJiZcclxuICAgICAgICAgICAgdmFsdWVJc1ZhbGlkRW1haWwoZW1haWxJbnB1dC52YWx1ZSlcclxuICAgICAgICApIHtcclxuICAgICAgICAgICAgaXNJbnB1dFZhbHVlc1ZhbGlkID0gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBpc0lucHV0VmFsdWVzVmFsaWQ7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gdmFsdWVEb250Q29udGFpbk51bWJlcnModmFsdWUpIHtcclxuICAgICAgICB2YXIgcmVnZXhDb25kaXRpb24gPSAvXlthLXpdKyQvaTtcclxuICAgICAgICByZXR1cm4gcmVnZXhDb25kaXRpb24udGVzdCh2YWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gdmFsdWVJc1ZhbGlkUGhvbmUodmFsdWUpIHtcclxuICAgICAgICB2YXIgcmVnZXhDb25kaXRpb24gPSAvXlsrXSpbKF17MCwxfVswLTkgXXsxLDR9WyldezAsMX1bKF17MCwxfVswLTldezEsM31bKV17MCwxfVstXFxzXFwuMC05XSokL2c7XHJcbiAgICAgICAgcmV0dXJuIHJlZ2V4Q29uZGl0aW9uLnRlc3QodmFsdWUpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHZhbHVlSXNWYWxpZEVtYWlsKHZhbHVlKSB7XHJcbiAgICAgICAgdmFyIHJlZ2V4Q29uZGl0aW9uID0gL14oKFtePD4oKVxcW1xcXVxcXFwuLDs6XFxzQFwiXSsoXFwuW148PigpXFxbXFxdXFxcXC4sOzpcXHNAXCJdKykqKXwoXCIuK1wiKSlAKChcXFtbMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcLlswLTldezEsM31cXC5bMC05XXsxLDN9XSl8KChbYS16QS1aXFwtMC05XStcXC4pK1thLXpBLVpdezEsfSkpJC9nO1xyXG5cclxuICAgICAgICBpZiAodmFsdWUgIT09ICcnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZWdleENvbmRpdGlvbi50ZXN0KHZhbHVlKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gY2F0Y2hGb3JtVmFsaWRhdGlvbkVycm9yKCkge1xyXG5cclxuICAgICAgICBzd2l0Y2ggKGZhbHNlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgdmFsdWVEb250Q29udGFpbk51bWJlcnMobmFtZUlucHV0LnZhbHVlKTpcclxuICAgICAgICAgICAgICAgIGRpc3BsYXlFcnJvck1lc3NhZ2UobmFtZUlucHV0LCAnVGhpcyBmaWVsZCBzaG91bGQgYmUgb25seSBsZXR0ZXJzJyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSB2YWx1ZURvbnRDb250YWluTnVtYmVycyhzdXJuYW1lSW5wdXQudmFsdWUpOlxyXG4gICAgICAgICAgICAgICAgZGlzcGxheUVycm9yTWVzc2FnZShzdXJuYW1lSW5wdXQsICdUaGlzIGZpZWxkIHNob3VsZCBiZSBvbmx5IGxldHRlcnMnKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIHZhbHVlSXNWYWxpZFBob25lKHBob25lSW5wdXQudmFsdWUpOlxyXG4gICAgICAgICAgICAgICAgZGlzcGxheUVycm9yTWVzc2FnZShwaG9uZUlucHV0LCAnUGxlYXNlIGVudGVyIGEgdmFsaWQgcGhvbmUgbnVtYmVyJyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSB2YWx1ZUlzVmFsaWRFbWFpbChlbWFpbElucHV0LnZhbHVlKTpcclxuICAgICAgICAgICAgICAgIGRpc3BsYXlFcnJvck1lc3NhZ2UoZW1haWxJbnB1dCwgJ1BsZWFzZSBlbnRlciBhIHZhbGlkIGVtYWlsIGFkZHJlc3MnKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBkaXNwbGF5RXJyb3JNZXNzYWdlKGlucHV0LCBtZXNzYWdlKSB7XHJcbiAgICAgICAgaW5wdXQuY2xhc3NMaXN0LmFkZCgnbGliZXJ0ZXgtZm9ybV9faW5wdXQtLWVycm9yJyk7XHJcblxyXG4gICAgICAgIC8vY29uc29sZS5sb2coZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmxpYmVydGV4LWZvcm1fX2lucHV0LS1lcnJvcicpKTtcclxuICAgICAgICBpbnB1dC5uZXh0U2libGluZy5pbm5lckhUTUwgPSBtZXNzYWdlO1xyXG4gICAgfVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IEZvcm1WYWxpZGF0aW9uO1xyXG4iLCIndXNlIHN0cmljdCc7XHJcblxyXG52YXIgRm9ybVZhbGlkYXRpb24gPSByZXF1aXJlKCcuL2Zvcm0tdmFsaWRhdGlvbicpO1xyXG52YXIgVGFibGVHZW5lcmF0b3IgPSByZXF1aXJlKCcuL3RhYmxlLWdlbmVyYXRvcicpO1xyXG5cclxuKGZ1bmN0aW9uKCkge1xyXG4gICAgbmV3IEZvcm1WYWxpZGF0aW9uKCk7XHJcbiAgICBuZXcgVGFibGVHZW5lcmF0b3IoKTtcclxufSkoKTtcclxuIiwiJ3VzZSBzdHJpY3QnO1xyXG5cclxudmFyIFRhYmxlR2VuZXJhdG9yID0gZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgdGFibGVEYXRhID0gW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbW9uZXk6IDUzMjEsXHJcbiAgICAgICAgICAgIGFjY291bnQ6IFwiMTIzIDQ1NiAwMDBcIixcclxuICAgICAgICAgICAgY291bnRyeTogXCJydXNpYVwiXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG1vbmV5OiAzMDAwLFxyXG4gICAgICAgICAgICBhY2NvdW50OiBcIjQyNSAyMzggMjM4XCIsXHJcbiAgICAgICAgICAgIGNvdW50cnk6IFwic3BhaW5cIlxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBtb25leTogODkwLFxyXG4gICAgICAgICAgICBhY2NvdW50OiBcIjEyMyA1NDMgNTQ4XCIsXHJcbiAgICAgICAgICAgIGNvdW50cnk6IFwiY2hpbmFcIlxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBtb25leTogNzc3LFxyXG4gICAgICAgICAgICBhY2NvdW50OiBcIjA5MCAyMzUgNDUzXCIsXHJcbiAgICAgICAgICAgIGNvdW50cnk6IFwicnVzaWFcIlxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBtb25leTogNjY2LFxyXG4gICAgICAgICAgICBhY2NvdW50OiBcIjAwOSAyODEgNDQzXCIsXHJcbiAgICAgICAgICAgIGNvdW50cnk6IFwic3BhaW5cIlxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBtb25leTogNTU1LFxyXG4gICAgICAgICAgICBhY2NvdW50OiBcIjUxNSA2NTQgNTIyXCIsXHJcbiAgICAgICAgICAgIGNvdW50cnk6IFwiY2hpbmFcIlxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBtb25leTogNDQ0LFxyXG4gICAgICAgICAgICBhY2NvdW50OiBcIjc2NSA0NTIgMjQxXCIsXHJcbiAgICAgICAgICAgIGNvdW50cnk6IFwicnVzaWFcIlxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBtb25leTogMzMzLFxyXG4gICAgICAgICAgICBhY2NvdW50OiBcIjU2MiAxODMgODE2XCIsXHJcbiAgICAgICAgICAgIGNvdW50cnk6IFwic3BhaW5cIlxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBtb25leTogMjIyLFxyXG4gICAgICAgICAgICBhY2NvdW50OiBcIjY0MiA0NTIgNTU1XCIsXHJcbiAgICAgICAgICAgIGNvdW50cnk6IFwiY2hpbmFcIlxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBtb25leTogMTExLFxyXG4gICAgICAgICAgICBhY2NvdW50OiBcIjIxMiA1NTIgMTEyXCIsXHJcbiAgICAgICAgICAgIGNvdW50cnk6IFwicnVzaWFcIlxyXG4gICAgICAgIH1cclxuICAgIF07XHJcbiAgICB2YXIgdGFibGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubGliZXJ0ZXgtcmFua2luZ19fdGFibGUnKTtcclxuICAgIHZhciB0YWJsZUJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubGliZXJ0ZXgtcmFua2luZ19fdGFibGUtYm9keScpO1xyXG4gICAgdmFyIHRhYmxlUm93cyA9IHRhYmxlQm9keS5xdWVyeVNlbGVjdG9yQWxsKCcubGliZXJ0ZXgtcmFua2luZ19fdGFibGUtcm93Jyk7XHJcblxyXG4gICAgZnVuY3Rpb24gcG9wdWxhdGVUYWJsZVdpdGhEYXRhKCkge1xyXG4gICAgICAgIHZhciB0YWJsZVNvcnRDcml0ZXJpYUluTG9jYWxTdG9yYWdlID0gaXNUYWJsZVNvckNyaXRlcmlhSW5Mb2NhbFN0b3JhZ2UoKTtcclxuXHJcbiAgICAgICAgaWYgKHRhYmxlU29ydENyaXRlcmlhSW5Mb2NhbFN0b3JhZ2UpIHtcclxuICAgICAgICAgICAgdmFyIG9yZGVyZWRUYWJsZURhdGEgPVxyXG4gICAgICAgICAgICAgICAgdGFibGVEYXRhLmNvbmNhdCgpLnNvcnQoY29tcGFyZVZhbHVlcyh0YWJsZVNvcnRDcml0ZXJpYUluTG9jYWxTdG9yYWdlKSk7XHJcbiAgICAgICAgICAgIGdldENlbGxzRGF0YShvcmRlcmVkVGFibGVEYXRhKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBnZXRDZWxsc0RhdGEodGFibGVEYXRhKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHNldEFjdGl2ZVNvcnQodGFibGVTb3J0Q3JpdGVyaWFJbkxvY2FsU3RvcmFnZSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gaXNUYWJsZVNvckNyaXRlcmlhSW5Mb2NhbFN0b3JhZ2UoKSB7XHJcbiAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2xpYmVydGV4LXRhYmxlLXNvcnQtY3JpdGVyaWEnKSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0Q2VsbHNEYXRhKGRhdGEpIHtcclxuXHJcbiAgICAgICAgZGF0YS5mb3JFYWNoKGZ1bmN0aW9uKHJvdywgaW5kZXgpIHtcclxuICAgICAgICAgICAgdmFyIHJvd0NlbGxzID0gdGFibGVSb3dzW2luZGV4XS5xdWVyeVNlbGVjdG9yQWxsKCcubGliZXJ0ZXgtcmFua2luZ19fdGFibGUtY2VsbCcpO1xyXG5cclxuICAgICAgICAgICAgcm93Q2VsbHNbMF0uaW5uZXJIVE1MID0gJzxzcGFuPicgKyByb3cubW9uZXkgKyAnPC9zcGFuPic7XHJcbiAgICAgICAgICAgIHJvd0NlbGxzWzFdLmlubmVySFRNTCA9ICc8c3Bhbj4nICsgcm93LmFjY291bnQgKyAnPC9zcGFuPic7XHJcbiAgICAgICAgICAgIHJvd0NlbGxzWzJdLmlubmVySFRNTCA9ICc8aW1nIHNyYz1cImltYWdlcy8nICsgcm93LmNvdW50cnkgKyAnLnBuZ1wiIGFsdD1cIicrIHJvdy5jb3VudHJ5ICsnXCIgLz4nO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHRhYmxlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc29ydFRhYmxlRGF0YSwgZmFsc2UpO1xyXG5cclxuICAgIGZ1bmN0aW9uIHNvcnRUYWJsZURhdGEoZXZlbnQpIHtcclxuXHJcbiAgICAgICAgdmFyIHRhcmdldFBhcmVudCA9IGV2ZW50LnRhcmdldC5wYXJlbnROb2RlO1xyXG5cclxuICAgICAgICBpZiAodGFyZ2V0UGFyZW50Lmhhc0F0dHJpYnV0ZSgnZGF0YS1zb3J0JykpIHtcclxuICAgICAgICAgICAgdmFyIHNvcnRDcml0ZXJpYSA9IHRhcmdldFBhcmVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtc29ydCcpO1xyXG4gICAgICAgICAgICB2YXIgb3JkZXJlZFRhYmxlRGF0YSA9XHJcbiAgICAgICAgICAgICAgICB0YWJsZURhdGEuY29uY2F0KCkuc29ydChjb21wYXJlVmFsdWVzKHNvcnRDcml0ZXJpYSkpO1xyXG5cclxuICAgICAgICAgICAgZ2V0Q2VsbHNEYXRhKG9yZGVyZWRUYWJsZURhdGEpO1xyXG4gICAgICAgICAgICBzZXRBY3RpdmVTb3J0KHNvcnRDcml0ZXJpYSk7XHJcbiAgICAgICAgICAgIHNhdmVUYWJsZVNvcnRDcml0ZXJpYShzb3J0Q3JpdGVyaWEpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzZXRBY3RpdmVTb3J0KHNvcnRDcml0ZXJpYSkge1xyXG4gICAgICAgIHZhciB0YWJsZVJvd3MgPSB0YWJsZUJvZHkucXVlcnlTZWxlY3RvckFsbCgnLmxpYmVydGV4LXJhbmtpbmdfX3RhYmxlLXJvdycpO1xyXG4gICAgICAgIHZhciBzb3J0ZWRDZWxscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5saWJlcnRleC1yYW5raW5nX190YWJsZS1jZWxsLS1zb3J0ZWQnKTtcclxuICAgICAgICB2YXIgc29ydGVkQ2VsbHNBcnJheSA9IFtdLnNsaWNlLmNhbGwoc29ydGVkQ2VsbHMpO1xyXG4gICAgICAgIHZhciBjZWxsSW5kZXggPSAwO1xyXG5cclxuICAgICAgICBpZiAoc29ydENyaXRlcmlhID09PSAnYWNjb3VudCcpIHtcclxuICAgICAgICAgICAgY2VsbEluZGV4ID0gMTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChzb3J0Q3JpdGVyaWEgPT09ICdjb3VudHJ5Jykge1xyXG4gICAgICAgICAgICBjZWxsSW5kZXggPSAyO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc29ydGVkQ2VsbHNBcnJheS5mb3JFYWNoKGZ1bmN0aW9uKGNlbGwpIHtcclxuICAgICAgICAgICAgY2VsbC5jbGFzc0xpc3QucmVtb3ZlKCdsaWJlcnRleC1yYW5raW5nX190YWJsZS1jZWxsLS1zb3J0ZWQnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgZm9yICh2YXIgcm93SW5kZXggPSAwOyByb3dJbmRleCA8PSAyOyByb3dJbmRleCsrKSB7XHJcbiAgICAgICAgICAgIHZhciBjZWxscyA9IHRhYmxlUm93c1tyb3dJbmRleF0ucXVlcnlTZWxlY3RvckFsbCgnLmxpYmVydGV4LXJhbmtpbmdfX3RhYmxlLWNlbGwnKTtcclxuXHJcbiAgICAgICAgICAgIGNlbGxzW2NlbGxJbmRleF0uY2xhc3NMaXN0LmFkZCgnbGliZXJ0ZXgtcmFua2luZ19fdGFibGUtY2VsbC0tc29ydGVkJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGNvbXBhcmVWYWx1ZXMoa2V5KSB7XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGEsIGIpIHtcclxuXHJcbiAgICAgICAgICAgIHZhciBjb21wYXJpc29uID0gMDtcclxuICAgICAgICAgICAgaWYgKGFba2V5XSA+IGJba2V5XSkge1xyXG4gICAgICAgICAgICAgICAgY29tcGFyaXNvbiA9IDE7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoYVtrZXldIDwgYltrZXldKSB7XHJcbiAgICAgICAgICAgICAgICBjb21wYXJpc29uID0gLTE7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBjb21wYXJpc29uICogLTE7XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzYXZlVGFibGVTb3J0Q3JpdGVyaWEoc29ydENyaXRlcmlhKSB7XHJcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2xpYmVydGV4LXRhYmxlLXNvcnQtY3JpdGVyaWEnLCBKU09OLnN0cmluZ2lmeShzb3J0Q3JpdGVyaWEpKTtcclxuICAgIH1cclxuXHJcbiAgICBwb3B1bGF0ZVRhYmxlV2l0aERhdGEoKTtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBUYWJsZUdlbmVyYXRvcjtcclxuIl19"}